<!doctype html>
<html>
  <head>
    <title>Mindwave GUI</title>
  </head>
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <body>
    <div style="width: 50%;">
      <canvas id="attention"></canvas>
    </div>
    <div style="width: 50%;">
      <canvas id="meditation"></canvas>
    </div>
  </body>
  <script>
    const createZeroesArray = (length) => {
      const zeroesArray = [];
      for (let x = 0; x < length; x += 1) {
        zeroesArray.push(0);
      };
      return zeroesArray;
    }

    const updateData = (newData, dataArray, dataChart) => {
      dataArray.splice(0, 1);
      dataArray.push(newData);
      dataChart.update(0);
    }

    let attentionData = createZeroesArray(20);
    let meditationData = createZeroesArray(20);


    const socket = io();
    socket.on('data received', function(data){
      console.log(data);


      updateData(data.attention, attentionData, attentionChart);
      updateData(data.meditation, meditationData, meditationChart);
    });







    let attentionChart = new Chart(document.getElementById('attention').getContext('2d'), {
      type: 'line',
      data: {
          labels: attentionData,
          datasets: [{
              label: 'Attention',
              borderColor: 'rgb(255, 99, 132)',
              data: attentionData,
          }]
      },
      options: {}
    });

    let meditationChart = new Chart(document.getElementById('meditation').getContext('2d'), {
      type: 'line',
      data: {
          labels: meditationData,
          datasets: [{
              label: 'Meditation',
              borderColor: 'rgb(49, 99, 255)',
              data: meditationData,
          }]
      },
      options: {}
    });


  </script>
</html>
